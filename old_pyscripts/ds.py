import os

# Lista de nombres de archivos permitidos (sin extensiones)
allowed_file_names = [
    "e000_030",
    "datskillhelp",
    "townsupport",
    "scrgotodungeon",
    "e890_005",
    "e848_010",
    "e847_030",
    "e847_010",
    "e842_050",
    "e842_010",
    "e841_050",
    "e840_060",
    "e837_000",
    "e835_060",
    "e835_050",
    "e835_010",
    "e833_060",
    "e833_050",
    "e833_040",
    "e833_030",
    "e833_020",
    "e833_010",
    "e833_000",
    "e832_070",
    "e832_060",
    "e832_030",
    "e832_020",
    "e832_010",
    "e832_000",
    "e830_020",
    "e830_010",
    "e827_070",
    "e827_030",
    "e827_000",
    "e826_060",
    "e826_010",
    "e821_030",
    "e818_070",
    "e816_005",
    "e814_070",
    "e814_060",
    "e814_050",
    "e814_040",
    "e814_035",
    "e814_030",
    "e814_027",
    "e814_025",
    "e814_020",
    "e814_010",
    "e814_000",
    "e813_110",
    "e813_070",
    "e813_020",
    "e813_000",
    "e811_070",
    "e811_050",
    "e811_020",
    "e811_010",
    "e810_060",
    "e810_040",
    "e810_030",
    "e810_020",
    "e810_010",
    "e809_060",
    "e809_020",
    "e808_110",
    "e808_090",
    "e806_070",
    "e806_040",
    "e806_030",
    "e806_020",
    "e801_070",
    "e801_060",
    "e801_030",
    "e801_020",
    "e801_010",
    "e770_030",
    "e760_200",
    "e760_170",
    "e760_120",
    "e760_090",
    "e760_050",
    "e760_040",
    "e740_310",
    "e740_115",
    "e730_340",
    "e720_467",
    "e720_466",
    "e720_465",
    "e720_350",
    "e720_230",
    "e720_210",
    "e720_205",
    "e720_200",
    "e720_120",
    "e700_010",
    "e600_050",
    "e500_460",
    "e500_453",
    "e500_340",
    "e500_200",
    "e500_180",
    "e500_170",
    "e500_160",
    "e500_150",
    "e500_140",
    "e500_100",
    "e500_090",
    "e500_050",
    "e500_020",
    "e400_560",
    "e400_510",
    "e400_440",
    "e400_350",
    "e400_255",
    "e400_250",
    "e400_180",
    "e400_170",
    "e400_030",
    "e400_020",
    "e300_630",
    "e300_600",
    "e300_580",
    "e300_520",
    "e300_470",
    "e300_460",
    "e300_456",
    "e300_450",
    "e300_390",
    "e300_310",
    "e300_230",
    "e300_220",
    "e300_210",
    "e300_200",
    "e300_170",
    "e300_160",
    "e300_140",
    "e300_130",
    "e300_120",
    "e300_110",
    "e300_100",
    "e300_080",
    "e300_070",
    "e300_030",
    "e300_020",
    "e200_450",
    "e200_435",
    "e200_420",
    "e200_400",
    "e200_370",
    "e200_360",
    "e200_350",
    "e200_340",
    "e200_330",
    "e200_310",
    "e200_300",
    "e200_295",
    "e200_280",
    "e200_250",
    "e200_230",
    "e200_210",
    "e200_200",
    "e200_190",
    "e200_180",
    "e200_175",
    "e200_170",
    "e200_160",
    "e200_158",
    "e200_154",
    "e200_150",
    "e200_120",
    "e200_110",
    "e200_100",
    "e200_080",
    "e200_070",
    "e200_060",
    "e200_050",
    "e200_045",
    "e200_040",
    "e200_030",
    "e200_025",
    "e200_020",
    "e100_570",
    "e100_550",
    "e100_540",
    "e100_530",
    "e100_510",
    "e100_490",
    "e100_430",
    "e100_410",
    "e100_370",
    "e100_360",
    "e100_350",
    "e100_310",
    "e100_260",
    "e100_180",
    "e100_110",
    "e100_100",
    "e100_097",
    "e100_070",
    "e100_050",
    "e100_032",
    "e100_026",
    "e100_020",
    "e000_110",
    "e000_085",
    "e000_060",
    "e000_050",
    "e000_020",
    "charaTalk_haru",
    "objectiveMsgFree",
    "btlEvent810",
    "btlEvent808",
    "btlEvent806",
    "btlEvent804",
    "btlEvent621",
    "btlEvent602",
    "e000_030",
    "evt_introduction",
    "e833_000",
    "e832_060",
    "e832_020",
    "e814_060",
    "e814_040",
    "e814_030",
    "e814_025",
    "e814_000",
    "e809_000",
    "e801_030",
    "e760_030",
    "e740_310",
    "e720_465",
    "e720_210",
    "e720_120",
    "e710_410",
    "e710_405",
    "e710_400",
    "e710_320",
    "e710_235",
    "e710_226",
    "e710_160",
    "e710_110",
    "e400_510",
    "e300_230",
    "e300_030",
    "e100_490",
    "e100_450",
    "e100_370",
    "e100_360",
    "e100_350",
    "e100_340",
    "e100_310",
    "e100_210",
    "e100_205",
    "e100_200",
    "e100_190",
    "e100_157",
    "e100_120",
    "e004",
    "e004",
    "e004",
    "e001",
    "e000",
    "e006",
    "battlemessage"
]

# Ruta del directorio raíz
# Reemplazar con la ruta adecuada
root_directory = "D:\Q2\Programs\ModCompendium\Mods\PersonaQ2\Haru_replaced\Data"

# Función para eliminar archivos que no están en la lista permitida


def delete_files_not_in_list(root_dir, allowed_names):
    deleted_files = 0
    for dirpath, _, filenames in os.walk(root_dir):
        for filename in filenames:
            file_name_without_extension = os.path.splitext(filename)[0]
            if file_name_without_extension not in allowed_names:
                file_path = os.path.join(dirpath, filename)
                os.remove(file_path)
                print(f"Archivo eliminado: {file_path}")
                deleted_files += 1

    # Eliminar carpetas y subcarpetas vacías
    for dirpath, dirnames, _ in os.walk(root_dir, topdown=False):
        for dirname in dirnames:
            folder_path = os.path.join(dirpath, dirname)
            try:
                os.removedirs(folder_path)
                print(f"Carpeta eliminada: {folder_path}")
            except OSError:
                pass  # La carpeta no está vacía, no se puede eliminar
    print(f"Total de archivos eliminados: {deleted_files}")


# Llamar a la función para eliminar archivos no deseados
delete_files_not_in_list(root_directory, allowed_file_names)
